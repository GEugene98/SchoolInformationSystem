<!-- -->
<h2>Социальный паспорт семьи</h2>
<div class="panelling">
    <div class="panelling_select">
        <div class="panelling_select-years">
            <ng-select [items]="allAcademicYears"
                       style="width: 300px"
                       placeholder="Выберите учебный год"
                       bindLabel="name"
                       [(ngModel)]="selectedAcademicYear"
                       (ngModelChange)="loadClasses()">
            </ng-select>
        </div>
        <div class="panelling_select-classes">
            <ng-select [items]="allClasses"
                       style="width: 300px;"
                       placeholder="Выберите класс"
                       bindLabel="name"
                       [(ngModel)]="selectedClass">
            </ng-select>
        </div>
    </div>
    <div class="panelling_button">
        <button pButton 
                pRipple 
                icon="pi pi-check-square" 
                (click)="showModalDialogColumns()" 
                type="button" 
                label="Выбрать колонки для отображения" 
                style="margin-top: 8px; float: right;">
        </button>
    </div>
</div>

<table class="table">
    <thead>
      <tr>
        <th *ngFor = "let column of getVisibleColumns()" scope="col">{{column.name}}</th>
        <th scope ="col">Действия</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let family of families">
          <td *ngFor="let column of getVisibleColumns()">{{getPropertyValue(family, column.fieldInfo)}}</td>
          <td>
            <div class="action-icons">
              <a title="Редактировать" href="javascript:void(0)" class="pi pi-pencil" aria-hidden="true" (click)="showModalDialogEdit()"></a>
              <a title="Удалить" href="javascript:void(0)" class="pi pi-times" aria-hidden="true" style="color: red;"></a>
            </div>
          </td>
      </tr>
    </tbody>
</table>


<!-- Modal windows -->

<!-- Selection visible columns -->
<p-dialog header="Выбор колонки для отображения" 
          [(visible)]="displayModalColumns" 
          [modal]="true" 
          [style]="{width: '30vw'}" 
          [baseZIndex]="10000"
          [draggable]="false">
    <div>
        <div *ngFor="let column of modalColumns" style="margin-bottom: 5px;">
            <p-checkbox [(ngModel)]="column.visibility" [binary]="true"></p-checkbox>
            <label>{{ column.name }}</label>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button (click)="hideModal()" label="Ok" styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>

<p-dialog header="Редактировать"
          [(visible)]="displayModalEdit"
          [modal]="true"
          [baseZIndex]="10000"
          [draggable]="false">
        <!-- <div>
            Адрес регистрации:
            <input type="text" [(ngModel)]="newFamily.registrAddres">
        </div> -->
</p-dialog>

<!-- <span style="color: purple" class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 
<span style="color: red" class="glyphicon glyphicon-remove" aria-hidden="true"></span>-->