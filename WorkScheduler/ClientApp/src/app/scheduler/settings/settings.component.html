<h1>Настройки</h1>

<tabset>
  <tab heading="Пользователи системы" id="tab1">
    <br />
    <button type="button" (click)="openModal(add)" class="btn btn-primary"><span class='glyphicon glyphicon-plus'></span> Зарегистрировать нового пользователя</button>

    <table class="table">
      <thead>
        <tr>
          <th scope="col">ФИО</th>
          <th scope="col">Логин</th>
          <th scope="col">Роли в системе</th>
          <th scope="col">Действия</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>{{user.lastName}} {{user.firstName}} {{user.surName}}</td>
          <td>
            {{user.name}}
          </td>
          <td>
            <span *ngFor="let role of user?.roles" class="badge">
              {{role}}
            </span> &nbsp;
          </td>
          <td>
            <div style="text-align: center">
              <a title="Редактировать" href="javascript:void(0)" (click)="copy(action); openModal(edit);"><span style="color: purple" class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
              <a title="Удалить" href="javascript:void(0)" (click)="delete(user)"><span style="color: red" class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

  </tab>
  <tab heading="Формы подтверждения" id="tab2">
  </tab>
</tabset>


<ng-template #add>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Зарегистрировать нового пользователя</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    Фамилия:
    <input type="text" [(ngModel)]="lastName" class="form-control" placeholder="Фамилия">
    <br />
    Имя:
    <input type="text" [(ngModel)]="firstName" class="form-control" placeholder="Имя">
    <br />
    Отчество:
    <input type="text" [(ngModel)]="surName" class="form-control" placeholder="Отчество">
    <br />
    Роли пользователя в системе:
    <ng-select [items]="allRoles"
               [multiple]="true"
               [closeOnSelect]="false"
               [searchable]="true"
               bindLabel="name"
               placeholder="Выберите как минимум одну роль"
               [(ngModel)]="selectedRoles">
    </ng-select>
    <div style="text-align:center; margin-top: 15px;">
      <button type="button" (click)="closeModal()" class="btn btn-danger">Отмена</button>
      <button type="button" (click)="create()" class="btn btn-success">Создать</button>
    </div>

  </div>
</ng-template>
